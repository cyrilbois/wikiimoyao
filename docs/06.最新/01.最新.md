---
title: 最新
date: 2019-12-31 13:49:34
permalink: /pages/8818d4830dac5e2a
sidebar: false
article: false # 不显示最近更新栏，以及不参与到最近更新文章数据计算
comment: false
---

<!-- <div class="tags">
  {{getTags}}
  <span class="active">全部</span>
  <span>JavaScript文章</span>
  <span>Vue文章</span>
  <span>《JavaScript教程》笔记</span>
  <span>《ES6 教程》笔记</span>
  <span>JavaScript文章</span>
  <span>Vue文章</span>
  <span>《JavaScript教程》笔记</span>
  <span>《ES6 教程》笔记</span>
  <span>JavaScript文章</span>
  <span>Vue文章</span>
  <span>《JavaScript教程》笔记</span>
  <span>《ES6 教程》笔记</span>
  <span>JavaScript文章</span>
  <span>Vue文章</span>
  <span>《JavaScript教程》笔记</span>
  <span>《ES6 教程》笔记</span>
  <span>JavaScript文章</span>
  <span>Vue文章</span>
  <span>《JavaScript教程》笔记</span>
  <span>《ES6 教程》笔记</span>
</div> -->

<ul class="page-guide-ul">
  <li 
    class="page-guide-row"
    v-for="(post, index) in topPublishPosts"
    :key="index"
    href="post"
  >
    <a :href="post.path">{{post.title}}</a>
    <span>{{ post.formatDay }}</span>
  </li>
</ul>

<div @click="loadMore" class="page-guide-btn" v-if="showBtn">
  <div ref="btn">{{btnInfo}}</div>
</div>

<script>
import { getTopKPosts, getPagesList } from '../.vuepress/theme/util/getTopKPosts'

export default {
  data() {
    return {
      pagesList: {},
      step: 20,
      posts: [],
      page: 1,
      num: 0, // 页面数量
      btnInfo: '加载更多',
      showBtn: true,
      timeout: null,
    }
  },

  mounted() {
    this.posts = this.$site.pages
    this.num = this.posts.length
  },

  computed: {
    getTags() {
      getPagesList(this.posts)
    },
    topPublishPosts() {
      // return this.getTopKPosts(this.page * this.step)
      return getTopKPosts(this.posts, this.page * this.step)
    }
  },

  methods: {
   



    // getTopKPosts(num) { // 文章数据处理
    //   const re = /.*\/(.*?)\.(html|md)/
    //   return this.posts
    //     .filter(post => {
    //       const { frontmatter } = post;
    //       return frontmatter && frontmatter.permalink && frontmatter.title && frontmatter.article !== false;
    //     })
    //     .map(post => {
    //       const execs = re.exec(post.relativePath)
    //       return {
    //         ...post,
    //         updateTimestamp: (new Date(post.lastUpdated || post.frontmatter.date)).getTime(),
    //         filename: execs ? execs['1'] : '',
    //         formatDay: this.formatDate(new Date(post.lastUpdated || post.frontmatter.date))
    //       }
    //     })
    //     .sort((a, b) => b.updateTimestamp - a.updateTimestamp)
    //     .slice(0, num)
    // },
    
    // formatDate(date) { // 日期格式化
    //   if (!(date instanceof Date)) {
    //     return 
    //   }

    //   return `${date.getFullYear()}/${this.zero(date.getMonth() + 1)}/${this.zero(date.getDate())}`
    // },
    // zero(d){ // 补0
    //   return d.toString().padStart(2,'0')
    // },

    
    loadMore() { // 加载更多
      if (this.timeout) {
        return
      }

      if (this.page * this.step >= this.num) {
        this.btnInfo = '加载完成'
        this.$refs.btn.style.opacity = 0
        this.timeout = setTimeout(() => this.showBtn = false, 300)
      } else {
        this.page += 1
      }
    }
  }
}
</script>

<style scoped lang="stylus" rel="stylesheet/stylus">
.tags
  margin 30px 0
  span
    vertical-align: middle;
    margin: 4px 4px 10px;
    padding: 5px 8px;
    display: inline-block;
    cursor: pointer;
    border-radius: .25rem;
    background: #E15B64;
    color: #fff;
    line-height: 13px;
    font-size: 13px;
    box-shadow: var(--box-shadow);
    transition: all .5s;
    &.active
      transform: scale(1.2);
    &:not(.active):hover
      transform: scale(1.1); 

.page-guide-ul {
  padding-left: 0;
}

.page-guide-row {
  line-height: 1.3;
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  position: relative;
  margin: 10px 0px;
  text-shadow: 0 3px 6px rgba(0,0,0,.15);
}

.page-guide-row::after {
  content: " ";
  width: 100%;
  border-bottom: 1px dashed #aaa;
  position: absolute;
  top: 50%;
  right: 0;
}

.page-guide-row a, .page-guide-row span {
  background: white;
  z-index: 1;
}

.page-guide-row a {
  max-width: 50%;
  padding-right: 20px;
  color: $textColor
}

.page-guide-row span {
  color: #aaa;
  padding-left: 20px;
}

.page-guide-btn {
  text-align: center;
  margin: 30px 0;
}

.page-guide-btn div {
  display: inline-block;
  color: #fff;
  background-color: $accentColor;
  padding: 0.6rem 1.2rem;
  border-radius: 4px;
  transition: all 0.3s ease;
  box-sizing: border-box;
  border-bottom: 1px solid $badgeTipColor;
}

.page-guide-btn div:hover {
  cursor: pointer;
}
</style>
