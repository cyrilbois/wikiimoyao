---
title: 如何添加CSS暗模式到网站
date: 2020-03-31 14:06:26
permalink: /pages/0ec4d61d0008fd52
---
# 如何添加CSS暗模式到网站

很多人喜欢选择APP或网站中的暗模式，也许他们更喜欢这样的外观，或者他们想让自己的眼睛免受疲劳。这篇文章将告诉你如何在网站中实现一个自动的CSS暗模式，根据访客的系统主题来自动改变。



## CSS Dark Mode（暗模式）

在`:root`根元素中定义变量来设置主题的颜色。我建议你也这样做，因为这样会使这个过程容易得多。我定义的变量如下:

```css
:root {
  --accent: #226997;
  --main: #333;
  --light: #666;
  --lighter: #f3f3f3;
  --border: #e6e6e6;
  --bg: #ffffff;
}
```

> **`:root`** 这个 CSS 伪类匹配文档树的根元素。对于 HTML 来说，**`:root`** 表示 `<html>`元素，除了优先级更高之外，与 `html` 选择器相同。

如果希望在样式表中使用这些变量，可以这样做

```css
p {
  color: var(--main);
}
```

这样，如果你想改变你的主题颜色，所需要做的就是修改你定义的变量，所有使用这个变量的样式都会被更新。

现在我们需要定义一组新的变量，这些变量将在调用CSS暗模式时使用。对我来说，新的变量是这样的:

```css
/* 定义暗模式的颜色 */
:root {
  --accent: #3493d1;
  --main: #f3f3f3;
  --light: #ececec;
  --lighter: #666;
  --border: #e6e6e6;
  --bg: #333333;
}
```



## 添加暗模式支持

现在我们定义了两组变量。剩下要做的一件事就是将`prefers-color-scheme`媒体查询添加到我们的暗模式变量中。

使用您的暗模式变量并在外层添加`@media`查询

```css
/* 定义暗模式的颜色 */
@media (prefers-color-scheme: dark) {
  :root {
    --accent: #3493d1;
    --main: #f3f3f3;
    --light: #ececec;
    --lighter: #666;
    --border: #e6e6e6;
    --bg: #333333;
  }
}
```

> [`prefers-color-scheme`文档](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-color-scheme)

这是真的! 如果有人正在使用一个暗模式的系统主题，并访问你的网站，将自动切换到暗模式。

如果你的电脑系统不支持暗模式，可以使用手机测试，先把手机的系统主题调到暗模式，再打开你的网站。



## 结论

你现在应该有一个网站，不仅是布局方面响应移动界面，还可以按主题响应。我相信你的深夜访客，或者那些喜欢黑暗主题网站的人，会感谢你的。





