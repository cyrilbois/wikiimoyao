---
title: 探索 Python 配置文件的最佳实践
tags: 
- Python
categories: 
  - 💻 工作
  - 规范
date: 2019-05-26 12:27:56
permalink: /guide/python-config-choice/
---
首先看几种常见的存储配置文件的方式：

## 专用的py文件存储

Python不是配置格式。 最佳做法不是将这些内容存储在.py文件中，而是将其存储为YAML或JSON或INI或任何其他格式并加载到其中。如果您需要在程序运行时更改配置，则可以 让线程监视文件描述符中的更改并适当地重新加载配置。

如果您将配置存储在.py文件中以进行长时间运行（例如，例如Web服务器），则基本上需要重新启动整个程序（python的重装是要使用的屁股上的真正痛苦，并且很多 非常健壮的Web框架在IMO方面仍然存在很多麻烦。 将其保存在配置文件中还意味着最终用户可以随意更改配置（而代码可能已经预先编译为.pyc文件中的字节码）。

话虽这么说，如果它是最适合您的变量，并且变量在程序的整个生命周期内都不会改变，则将它们存储在.py文件中并不是什么大问题。 随着程序的发展，您将不得不重新考虑该问题。 我目前正在开发一个程序，该程序将其配置存储在python文件中，并且要更改任何内容都非常麻烦。

## 不使用 json 的理由
- 没有注释
- 逗号太烦人
参见：

[Why JSON isn't a Good Configuration Language - Lucidchart](https://www.lucidchart.com/techblog/2018/07/16/why-json-isnt-a-good-configuration-language/)
  上文翻译：[为什么说 JSON 不适合做配置文件？ - 简书](https://www.jianshu.com/p/c69453777c4b)

## 可选

- [YAML，JSON，ini，XML 用来做配置文件，优缺点分别是什么？ - 知乎](https://www.zhihu.com/question/41253282)
- [HOCON](https://www.zhihu.com/question/41253282/answer/119857880)
- [chimpler/pyhocon: HOCON parser for Python](https://github.com/chimpler/pyhocon)

## 参考链接
[Are there any best practices when it comes to configuration files? : Python](https://www.reddit.com/r/Python/comments/46m0ud/are_there_any_best_practices_when_it_comes_to/)